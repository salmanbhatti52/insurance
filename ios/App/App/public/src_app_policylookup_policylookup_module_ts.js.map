{"version":3,"file":"src_app_policylookup_policylookup_module_ts.js","mappings":"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","sources":["./src/app/policylookup/policylookup-routing.module.ts","./src/app/policylookup/policylookup.module.ts","./src/app/policylookup/policylookup.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { PolicylookupPage } from './policylookup.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PolicylookupPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class PolicylookupPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PolicylookupPageRoutingModule } from './policylookup-routing.module';\r\n\r\nimport { PolicylookupPage } from './policylookup.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    PolicylookupPageRoutingModule\r\n  ],\r\n  declarations: [PolicylookupPage]\r\n})\r\nexport class PolicylookupPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { InsuranceAppService } from '../services/insurance-app.service';\r\n\r\ndeclare var require: any;\r\n@Component({\r\n  selector: 'app-policylookup',\r\n  templateUrl: './policylookup.page.html',\r\n  styleUrls: ['./policylookup.page.scss'],\r\n})\r\nexport class PolicylookupPage implements OnInit {\r\n  show = false;\r\n  Title = 'Select Policy Type';\r\n  listarray = [{ Title: 'Gen Business' }, { Title: 'Life/Investment' }];\r\n  uTitle = '';\r\n  policy = false;\r\n  policynum = '';\r\n  verifypolicy: any;\r\n  full_name: any;\r\n  InsuranceType: any;\r\n  StartDate: any;\r\n  DateofExpiration: any;\r\n  PolicyNumber: any;\r\n  P10PolicyNumber: any;\r\n  response: any;\r\n  gibspolicy = false;\r\n  statusdesc: any;\r\n\r\n  constructor(public api: InsuranceAppService) { }\r\n\r\n  ngOnInit() {\r\n    var number = 'YEKINI, AZEEZAT, ABOSEDE';\r\n    var stringValue = number.replace(/,/g, '');\r\n\r\n    console.log(stringValue, 'using String');\r\n  }\r\n\r\n  openlist() {\r\n    console.log('show value====', this.show);\r\n\r\n    if (this.show == false) {\r\n      this.show = true;\r\n    } else {\r\n      this.show = false;\r\n    }\r\n  }\r\n\r\n  selectTitle(list) {\r\n    this.uTitle = list.Title;\r\n    this.show = false;\r\n  }\r\n\r\n  async policylookup() {\r\n    if (this.uTitle == '') {\r\n      this.api.presenttoast('Please select an item from dropdown');\r\n    } else if (this.policynum == '') {\r\n      this.api.presenttoast('Policy Number Field is required!');\r\n    } else {\r\n      if (this.uTitle == 'Gen Business') {\r\n        this.api.showLoader();\r\n        var myData = {\r\n          sid: 'ECHANNEL2',\r\n          token: '78CD825E-2F6A-4986-962C-7F0FA3E945BD',\r\n        };\r\n        this.api.gibsapi(myData).subscribe(\r\n          (res: any) => {\r\n            console.log(res);\r\n            let token = res.accessToken;\r\n            this.policyresult(token);\r\n          },\r\n          (err) => {\r\n            console.log(err);\r\n            this.api.hideLoader();\r\n          }\r\n        );\r\n      }\r\n      if (this.uTitle == 'Life/Investment') {\r\n        let token = '39109f7df56e1CORNERStone9e685066bb852';\r\n        this.api.showLoader();\r\n        this.api\r\n          .get(\r\n            'https://ies.cornerstone.com.ng/demo2/api_ies/ies_connect.php?process=Processopenledapi&polnum2=' +\r\n            this.policynum +\r\n            '&process_code=140',\r\n            '39109f7df56e1CORNERStone9e685066bb852'\r\n          )\r\n          .subscribe(\r\n            (response: any) => {\r\n              this.api.hideLoader();\r\n              console.log(response);\r\n              this.verifypolicy = response.result;\r\n              if (this.verifypolicy) {\r\n                if (response.result.status == 0) {\r\n                  this.gibspolicy = false;\r\n                  this.policy = false;\r\n                  // this.api.presenttoast(response.result.message);\r\n                  this.api.alertboxshow(response.result.message);\r\n                } else {\r\n                  this.gibspolicy = false;\r\n                  this.policy = true;\r\n                  var name = this.verifypolicy.insured;\r\n                  this.full_name = name.replace(/,/g, '');\r\n                  this.StartDate = this.verifypolicy.issuedate;\r\n                  this.DateofExpiration = this.verifypolicy.mat_date;\r\n                  this.PolicyNumber = this.verifypolicy.polnum;\r\n                  // this.InsuranceType =\r\n                  this.P10PolicyNumber = this.verifypolicy.polnum2;\r\n                  this.statusdesc = this.verifypolicy.statusdesc\r\n                }\r\n              } else {\r\n                this.gibspolicy = false;\r\n                // this.api.presenttoast('Policy record not found');\r\n                this.api.alertboxshow('Policy record not found');\r\n              }\r\n            },\r\n            (err) => {\r\n              this.gibspolicy = false;\r\n              this.policy = false;\r\n              this.api.hideLoader();\r\n            }\r\n          );\r\n      }\r\n    }\r\n  }\r\n\r\n  policyresult(token) {\r\n    // P/500/4000/2022/00007\r\n    let encode = encodeURIComponent(this.policynum);\r\n    console.log('eee--', encode);\r\n\r\n    let Bearertoken = token;\r\n    let url = 'https://testcipapiservices.gibsonline.com/api/policies/' + encode;\r\n    this.api.getpolicy(url, Bearertoken).subscribe(\r\n      (response: any) => {\r\n        this.api.hideLoader();\r\n        console.log(response);\r\n        this.policy = false;\r\n\r\n        this.gibspolicy = true;\r\n        this.full_name =\r\n          response.customerName\r\n        this.StartDate = response.startDate;\r\n        this.DateofExpiration = response.endDate;\r\n        this.PolicyNumber = response.policyNo;\r\n      },\r\n      (err) => {\r\n        console.log(err);\r\n        this.gibspolicy = false;\r\n        this.policy = false;\r\n        // this.api.presenttoast(err.error.message);\r\n        this.api.alertboxshow(err.error.message);\r\n        this.api.hideLoader();\r\n      }\r\n    );\r\n\r\n    // this.api.getpolicy('http://testcipapiservices.gibsonline.com/api/Policies/Motor', Bearertoken).subscribe((res: any) => {\r\n    //   console.log('ressssss', res);\r\n\r\n    //   let postdata = {\r\n    //     \"productID\": \"1103\",\r\n    //     \"entryDate\": \"2022-10-20T04:29:31.261Z\",\r\n    //     \"startDate\": \"2018-03-13T00:00:00\",\r\n    //     \"endDate\": \"2019-03-12T00:00:00\",\r\n    //     \"fxCurrency\": \"NGN\",\r\n    //     \"fxRate\": 1,\r\n    //     \"referrerSource\": \"AGENT\",\r\n    //     \"referrerDetails\": \"string\",\r\n    //     \"paymentProviderID\": \"string\",\r\n    //     \"paymentReferenceID\": \"string\",\r\n    //     \"insured\": {\r\n    //       \"title\": \"string\",\r\n    //       \"lastName\": \"string\",\r\n    //       \"firstName\": \"string\",\r\n    //       \"otherName\": \"string\",\r\n    //       \"gender\": \"MALE\",\r\n    //       \"email\": \"user@example.com\",\r\n    //       \"address\": \"string\",\r\n    //       \"phoneLine1\": \"0803 502 6956\",\r\n    //       \"phoneLine2\": \"0803 502 6956\",\r\n    //       \"isOrg\": true,\r\n    //       \"orgName\": \"string\",\r\n    //       \"orgRegNumber\": \"string\",\r\n    //       \"orgRegDate\": \"2022-10-20T04:29:31.261Z\",\r\n    //       \"taxIdNumber\": \"string\",\r\n    //       \"cityLGA\": \"string\",\r\n    //       \"stateID\": \"string\",\r\n    //       \"nationality\": \"string\",\r\n    //       \"dateOfBirth\": \"2022-10-20T04:29:31.261Z\",\r\n    //       \"kycType\": \"NOT_AVAILABLE\",\r\n    //       \"kycNumber\": \"string\",\r\n    //       \"kycIssueDate\": \"2022-10-20T04:29:31.261Z\",\r\n    //       \"kycExpiryDate\": \"2022-10-20T04:29:31.261Z\",\r\n    //       \"nextOfKin\": {\r\n    //         \"title\": \"string\",\r\n    //         \"lastName\": \"string\",\r\n    //         \"firstName\": \"string\",\r\n    //         \"otherName\": \"string\",\r\n    //         \"gender\": \"MALE\",\r\n    //         \"email\": \"user@example.com\",\r\n    //         \"address\": \"string\",\r\n    //         \"phoneLine1\": \"123456\",\r\n    //         \"phoneLine2\": \"123456\"\r\n    //       }\r\n    //     },\r\n    //     \"policySections\": [\r\n    //       {\r\n    //         \"sectionID\": \"string\",\r\n    //         \"sectionSumInsured\": 0,\r\n    //         \"sectionPremium\": 0,\r\n    //         \"vehicleRegNo\": \"string\",\r\n    //         \"vehicleTypeID\": \"VAN\",\r\n    //         \"vehicleUser\": \"string\",\r\n    //         \"engineNumber\": \"string\",\r\n    //         \"chasisNumber\": \"string\",\r\n    //         \"vehicleUsage\": \"PRIVATE\",\r\n    //         \"numberOfSeats\": 0,\r\n    //         \"stateOfIssue\": \"string\",\r\n    //         \"vehicleMake\": \"string\",\r\n    //         \"vehicleModel\": \"string\",\r\n    //         \"manufactureYear\": 0,\r\n    //         \"vehicleColour\": \"string\",\r\n    //         \"engineCapacityHP\": \"string\",\r\n    //         \"coverType\": \"COMPREHENSIVE\"\r\n    //       }\r\n    //     ]\r\n    //   }\r\n\r\n    //   this.api.postdata('http://testcipapiservices.gibsonline.com/api/Policies/Motor', postdata, Bearertoken).subscribe((res: any) => {\r\n    //     console.log('motor response---', res);\r\n\r\n    //   })\r\n    // })\r\n  }\r\n}\r\n"],"names":["Component","InsuranceAppService","PolicylookupPage","constructor","api","Title","ngOnInit","number","stringValue","replace","console","log","openlist","show","selectTitle","list","uTitle","policylookup","presenttoast","policynum","showLoader","myData","sid","token","gibsapi","subscribe","res","accessToken","policyresult","err","hideLoader","get","response","verifypolicy","result","status","gibspolicy","policy","alertboxshow","message","name","insured","full_name","StartDate","issuedate","DateofExpiration","mat_date","PolicyNumber","polnum","P10PolicyNumber","polnum2","statusdesc","encode","encodeURIComponent","Bearertoken","url","getpolicy","customerName","startDate","endDate","policyNo","error","selector","template"],"sourceRoot":"webpack:///"}