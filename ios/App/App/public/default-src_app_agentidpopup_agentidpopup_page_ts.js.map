{"version":3,"file":"default-src_app_agentidpopup_agentidpopup_page_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAA2C;AACO;AACT;AACuB;AACQ;IAO3D,gBAAgB,SAAhB,gBAAgB;IAc3B,YAAmB,KAAsB,EAChC,OAAsB,EACtB,GAAwB,EACxB,QAAkB,EAClB,MAAc;QAJJ,UAAK,GAAL,KAAK,CAAiB;QAChC,YAAO,GAAP,OAAO,CAAe;QACtB,QAAG,GAAH,GAAG,CAAqB;QACxB,aAAQ,GAAR,QAAQ,CAAU;QAClB,WAAM,GAAN,MAAM,CAAQ;QAjBvB,mBAAc,GAAG,mBAAmB,CAAC;QACrC,YAAO,GAAG,EAAE,CAAC;QACb,cAAS,GAAQ,KAAK,CAAC;QAGvB,mBAAc,GAAG,CAAC;gBAChB,YAAY,EAAE,MAAM;gBACpB,MAAM,EAAE,KAAK;aACd,EAAE;gBACD,YAAY,EAAE,KAAK;gBACnB,MAAM,EAAE,KAAK;aACd,CAAC,CAAC;IAMwB,CAAC;IAE5B,QAAQ;IACR,CAAC;IAED,OAAO;QACL,wBAAwB;QACxB,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;IACtB,CAAC;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,cAAc,IAAI,mBAAmB,EAAE;YAC9C,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,0BAA0B,CAAC;SAClD;aAAM,IAAI,IAAI,CAAC,OAAO,IAAI,EAAE,EAAE;YAC7B,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,gBAAgB,CAAC;SACxC;aAAM;YAEL,IAAI,IAAI,CAAC,cAAc,IAAI,MAAM,EAAE;gBACjC,IAAI,MAAM,GAAG;oBACX,UAAU,EAAE,aAAa;oBACzB,UAAU,EAAE,eAAe;iBAC5B;gBACD,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,CAAC,GAAQ,EAAE,EAAE;oBAC9C,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBACjB,IAAI,KAAK,GAAG,GAAG,CAAC,WAAW;oBAC3B,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC;gBACvB,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;oBACT,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBACjB,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;gBACxB,CAAC,CAAC,CAAC;aACJ;iBAAM;gBAEL,IAAI,KAAK,GAAG,uCAAuC;gBACnD,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;gBACtB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,gHAAgH,GAAG,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,SAAS,CAAC,CAAC,GAAQ,EAAE,EAAE;oBAC1K,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBACjB,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;oBAErB,IAAI,GAAG,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,EAAE;wBAC1B,YAAY,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC;wBACxC,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,OAAO,CAAC;wBAC3B,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;wBAC7C,0EAA0E;wBAC1E,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC;wBAE9C,IAAI,CAAC,MAAM,EAAE,CAAC;qBACf;yBAAM;wBACL,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;wBACtB,6CAA6C;wBAC7C,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;qBAC3C;gBACH,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;oBACT,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBACjB,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;gBACvB,CAAC,CAAC,CAAC;aACJ;SAKF;IAEH,CAAC;IACD,SAAS,CAAC,KAAK;QACb,gBAAgB;QAChB,QAAQ;QACR,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;QACtB,IAAI,SAAS,GAAG,KAAK;QACrB,iHAAiH;QACjH,kCAAkC;QAClC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,uDAAuD,GAAG,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC,SAAS,CAAC,CAAC,GAAQ,EAAE,EAAE;YAC3H,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;YAC7B,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;YACtB,YAAY,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YAEtD,YAAY,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;YACzC,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,OAAO,CAAC;YAC3B,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YAC7C,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;YACzC,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,SAAS,CAAC;YAC5C,IAAI,CAAC,MAAM,EAAE;YACb,6CAA6C;YAC7C,wCAAwC;YAExC,mDAAmD;YAGnD,sCAAsC;YACtC,2DAA2D;YAC3D,8CAA8C;YAC9C,uBAAuB;YACvB,qDAAqD;YACrD,KAAK;QACP,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACT,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACjB,4CAA4C;YAC5C,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YACzC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;QACvB,CAAC,CAAC,CAAC;QACH,gBAAgB;QAChB,sBAAsB;QACtB,2CAA2C;QAC3C,0BAA0B;QAC1B,MAAM;IAER,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;QACtB,IAAI,MAAM,GACR,oBAAoB;YACpB,uBAAuB;YACvB,iBAAiB;YACjB,UAAU;YACV,uBAAuB,CAAC;QAC1B,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,SAAS,CACnC,CAAC,GAAQ,EAAE,EAAE;YACX,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YAC1B,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;YACtB,IAAI,GAAG,CAAC,KAAK,EAAE;gBAEb,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;gBAClC,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;gBAC5C,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;gBACzC,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;gBACzC,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,UAAU,CAAC,CAAC;gBAC9C,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,SAAS,CAAC,CAAC;gBAC7C,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;gBAC1C,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;gBACzC,IAAI,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,UAAU,CAAC;gBACnC,6CAA6C;gBAC7C,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,+BAA+B,CAAC,CAAC,CAAC;aAC9D;iBAAM;gBACL,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;gBACtB,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,gCAAgC,CAAC,CAAC;gBACxD,oBAAoB;gBACpB,uDAAuD;gBACvD,qBAAqB;gBACrB,uBAAuB;gBACvB,YAAY;aACb;QACH,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;YACN,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;YACtB,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YAE1B,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;QAC7B,CAAC,CACF,CAAC;IACJ,CAAC;IAED,gBAAgB;QACd,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,EAAE;YAC1B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;SACxB;aAAM;YACL,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;SAEvB;IACH,CAAC;IAGD,kBAAkB,CAAC,IAAI,EAAE,KAAK;QAC5B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC;QACxC,6BAA6B;QAC7B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IAEzB,CAAC;CAEF;;YAlMQ,2DAAe;YAAE,yDAAa;YAC9B,gFAAmB;YAJnB,qDAAQ;YAER,mDAAM;;AASF,gBAAgB;IAL5B,wDAAS,CAAC;QACT,QAAQ,EAAE,kBAAkB;QAC5B,yEAAuC;;KAExC,CAAC;GACW,gBAAgB,CA0L5B;AA1L4B","sources":["./src/app/agentidpopup/agentidpopup.page.ts"],"sourcesContent":["import { Location } from '@angular/common';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { ModalController, NavController } from '@ionic/angular';\r\nimport { InsuranceAppService } from '../services/insurance-app.service';\r\n\r\n@Component({\r\n  selector: 'app-agentidpopup',\r\n  templateUrl: './agentidpopup.page.html',\r\n  styleUrls: ['./agentidpopup.page.scss'],\r\n})\r\nexport class AgentidpopupPage implements OnInit {\r\n  agentloginType = 'Select Agent Type';\r\n  agentId = '';\r\n  showMaker: any = false;\r\n\r\n\r\n  vechileMakenew = [{\r\n    manufacturer: \"Gibs\",\r\n    active: false\r\n  }, {\r\n    manufacturer: \"IES\",\r\n    active: false\r\n  }];\r\n\r\n  constructor(public modal: ModalController,\r\n    public navCtrl: NavController,\r\n    public api: InsuranceAppService,\r\n    public location: Location,\r\n    public router: Router) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  dismiss() {\r\n    // this.modal.dismiss();\r\n    this.location.back()\r\n  }\r\n\r\n  search() {\r\n    if (this.agentloginType == \"Select Agent Type\") {\r\n      this.api.presenttoast('Please Select Agent Type')\r\n    } else if (this.agentId == '') {\r\n      this.api.presenttoast('Enter Agent ID')\r\n    } else {\r\n\r\n      if (this.agentloginType == \"Gibs\") {\r\n        var myData = {\r\n          \"username\": \"DigitechApp\",\r\n          \"password\": \"Digitech@321#\"\r\n        }\r\n        this.api.gibsapi(myData).subscribe((res: any) => {\r\n          console.log(res);\r\n          let token = res.accessToken\r\n          this.getresult(token)\r\n        }, (err) => {\r\n          console.log(err);\r\n          this.api.hideLoader();\r\n        });\r\n      } else {\r\n\r\n        let token = '39109f7df56e1CORNERStone9e685066bb852'\r\n        this.api.showLoader();\r\n        this.api.get('https://ies.cornerstone.com.ng/demo2/api_ies/ies_connect.php?process=Processopenledapi&process_code=901&agent=' + this.agentId, token).subscribe((res: any) => {\r\n          console.log(res);\r\n          this.api.hideLoader()\r\n\r\n          if (res.result.status == 1) {\r\n            localStorage.setItem('loginas', 'agent')\r\n            this.api.loginas = 'agent';\r\n            localStorage.setItem('userid', this.agentId);\r\n            // localStorage.setItem('token', '39109f7df56e1CORNERStone9e685066bb852');\r\n            localStorage.setItem('fname', res.result.name)\r\n\r\n            this.signIn();\r\n          } else {\r\n            this.api.hideLoader();\r\n            // this.api.presenttoast(res.result.message);\r\n            this.api.alertboxshow(res.result.message);\r\n          }\r\n        }, (err) => {\r\n          console.log(err);\r\n          this.api.hideLoader()\r\n        });\r\n      }\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n  }\r\n  getresult(token) {\r\n    // ids:AG-000008\r\n    // 00003\r\n    this.api.showLoader();\r\n    let beartoken = token\r\n    // this.api.getpolicy('http://testcipapiservices.gibsonline.com/api/agents', beartoken).subscribe((res: any) => {\r\n    //   console.log('ressssss', res);\r\n    this.api.getpolicy('https://testcipapiservices.gibsonline.com/api/agents/' + this.agentId, beartoken).subscribe((res: any) => {\r\n      console.log('ressssss', res);\r\n      this.api.hideLoader();\r\n      localStorage.setItem('agentdata', JSON.stringify(res))\r\n\r\n      localStorage.setItem('loginas', 'agent');\r\n      this.api.loginas = 'agent';\r\n      localStorage.setItem('userid', this.agentId);\r\n      localStorage.setItem('token', beartoken);\r\n      localStorage.setItem('fname', res.agentName)\r\n      this.signIn()\r\n      // this.router.navigate(['/sign-up-screen']);\r\n      // this.router.navigate(['/dashboard']);\r\n\r\n      // this.navCtrl.navigateForward('agentloginscreen')\r\n\r\n\r\n      // this.modal.dismiss().then(data => {\r\n      //   localStorage.setItem('agentdata', JSON.stringify(res))\r\n      //   console.log('data came back from modal');\r\n      //   console.log(data);\r\n      //   this.navCtrl.navigateForward('agentloginscreen')\r\n      // })\r\n    }, (err) => {\r\n      console.log(err);\r\n      // this.api.presenttoast(err.error.message);\r\n      this.api.alertboxshow(err.error.message);\r\n      this.api.hideLoader()\r\n    });\r\n    // }, (err) => {\r\n    //   console.log(err);\r\n    //   this.api.presenttoast(err.error.title)\r\n    //   this.api.hideLoader()\r\n    // });\r\n\r\n  }\r\n\r\n  signIn() {\r\n    this.api.showLoader();\r\n    let myData =\r\n      'myData={\"email\": \"' +\r\n      'mobiletest1@gmail.com' +\r\n      '\",\"password\": \"' +\r\n      'password' +\r\n      '\", \"method\": \"login\"}';\r\n    this.api.insertData(myData).subscribe(\r\n      (res: any) => {\r\n        console.log('res==', res);\r\n        this.api.hideLoader();\r\n        if (res.email) {\r\n\r\n          this.api.presenttoast('Welcome!');\r\n          localStorage.setItem('userid', res.user_id);\r\n          localStorage.setItem('token', res.token);\r\n          localStorage.setItem('title', res.title);\r\n          localStorage.setItem('fname', res.first_name);\r\n          localStorage.setItem('lname', res.last_name);\r\n          localStorage.setItem('number', res.phone);\r\n          localStorage.setItem('email', res.email);\r\n          this.api.username = res.first_name;\r\n          // this.navCtrl.navigateRoot(['/dashboard']);\r\n          this.navCtrl.navigateRoot(['/home-page-screen-after-login']);\r\n        } else {\r\n          this.api.hideLoader();\r\n          this.api.presenttoast('Email or password is incorrect');\r\n          // this.error = true\r\n          // this.errormessage = 'Email or password is incorrect'\r\n          // setTimeout(() => {\r\n          //   this.error = false\r\n          // }, 3000);\r\n        }\r\n      },\r\n      (err) => {\r\n        this.api.hideLoader();\r\n        console.log('err==', err);\r\n\r\n        this.api.presenttoast(err);\r\n      }\r\n    );\r\n  }\r\n\r\n  openVhclMakeList() {\r\n    if (this.showMaker == true) {\r\n      this.showMaker = false;\r\n    } else {\r\n      this.showMaker = true;\r\n\r\n    }\r\n  }\r\n\r\n\r\n  selectVehicleMaker(list, index) {\r\n    this.agentloginType = list.manufacturer;\r\n    // this.vehicleModelVal = '';\r\n    this.showMaker = false;\r\n\r\n  }\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}