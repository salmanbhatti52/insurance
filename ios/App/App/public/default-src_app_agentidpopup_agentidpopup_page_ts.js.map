{"version":3,"file":"default-src_app_agentidpopup_agentidpopup_page_ts.js","mappings":"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","sources":["./src/app/agentidpopup/agentidpopup.page.ts"],"sourcesContent":["import { Location } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ModalController, NavController } from '@ionic/angular';\nimport { InsuranceAppService } from '../services/insurance-app.service';\n\n@Component({\n  selector: 'app-agentidpopup',\n  templateUrl: './agentidpopup.page.html',\n  styleUrls: ['./agentidpopup.page.scss'],\n})\nexport class AgentidpopupPage implements OnInit {\n  agentloginType = 'Select Agent Type';\n  agentId = '';\n  showMaker: any = false;\n\n\n  vechileMakenew = [{\n    manufacturer: \"Gibs\",\n    active: false\n  }, {\n    manufacturer: \"IES\",\n    active: false\n  }];\n  isdisabled: any = false;\n\n  constructor(public modal: ModalController,\n    public navCtrl: NavController,\n    public api: InsuranceAppService,\n    public location: Location,\n    public router: Router) { }\n\n  ngOnInit() {\n  }\n\n  dismiss() {\n    // this.modal.dismiss();\n    this.location.back()\n  }\n\n  search() {\n    if (this.agentloginType == \"Select Agent Type\") {\n      this.api.presenttoast('Please Select Agent Type')\n    } else if (this.agentId == '') {\n      this.api.presenttoast('Enter Agent ID')\n    } else {\n\n      this.isdisabled = true\n\n      if (this.agentloginType == \"Gibs\") {\n        var myData = {\n          \"username\": \"DigitechApp\",\n          \"password\": \"Digitech@321#\"\n        }\n        this.api.gibsapi(myData).subscribe((res: any) => {\n          console.log(res);\n          let token = res.accessToken\n          this.getresult(token)\n          this.isdisabled = false\n\n        }, (err) => {\n          console.log(err);\n          this.api.hideLoader();\n        });\n      } else {\n\n        let token = '39109f7df56e1CORNERStone9e685066bb852'\n        this.api.showLoader();\n        this.api.get('https://ies.cornerstone.com.ng/demo2/api_ies/ies_connect.php?process=Processopenledapi&process_code=901&agent=' + this.agentId, token).subscribe((res: any) => {\n          console.log(res);\n          this.api.hideLoader()\n          this.isdisabled = false\n\n          if (res.result.status == 1) {\n            localStorage.setItem('loginas', 'agent')\n            this.api.loginas = 'agent';\n            localStorage.setItem('userid', this.agentId);\n            // localStorage.setItem('token', '39109f7df56e1CORNERStone9e685066bb852');\n            localStorage.setItem('fname', res.result.name)\n\n            this.signIn();\n          } else {\n            this.api.hideLoader();\n            // this.api.presenttoast(res.result.message);\n            this.api.alertboxshow(res.result.message);\n          }\n        }, (err) => {\n          console.log(err);\n          this.api.hideLoader()\n        });\n      }\n\n\n\n\n    }\n\n  }\n  getresult(token) {\n    // ids:AG-000008\n    // 00003\n    this.api.showLoader();\n    let beartoken = token\n    // this.api.getpolicy('http://testcipapiservices.gibsonline.com/api/agents', beartoken).subscribe((res: any) => {\n    //   console.log('ressssss', res);\n    this.api.getpolicy('https://testcipapiservices.gibsonline.com/api/agents/' + this.agentId, beartoken).subscribe((res: any) => {\n      console.log('ressssss', res);\n      this.api.hideLoader();\n      localStorage.setItem('agentdata', JSON.stringify(res))\n\n      localStorage.setItem('loginas', 'agent');\n      this.api.loginas = 'agent';\n      localStorage.setItem('userid', this.agentId);\n      localStorage.setItem('token', beartoken);\n      localStorage.setItem('fname', res.agentName)\n      this.signIn()\n      // this.router.navigate(['/sign-up-screen']);\n      // this.router.navigate(['/dashboard']);\n\n      // this.navCtrl.navigateForward('agentloginscreen')\n\n\n      // this.modal.dismiss().then(data => {\n      //   localStorage.setItem('agentdata', JSON.stringify(res))\n      //   console.log('data came back from modal');\n      //   console.log(data);\n      //   this.navCtrl.navigateForward('agentloginscreen')\n      // })\n    }, (err) => {\n      console.log(err);\n      // this.api.presenttoast(err.error.message);\n      this.api.alertboxshow(err.error.message);\n      this.api.hideLoader()\n    });\n    // }, (err) => {\n    //   console.log(err);\n    //   this.api.presenttoast(err.error.title)\n    //   this.api.hideLoader()\n    // });\n\n  }\n\n  signIn() {\n    this.api.showLoader();\n    let myData =\n      'myData={\"email\": \"' +\n      'mobiletest1@gmail.com' +\n      '\",\"password\": \"' +\n      'password' +\n      '\", \"method\": \"login\"}';\n    this.api.insertData(myData).subscribe(\n      (res: any) => {\n        console.log('res==', res);\n        this.api.hideLoader();\n        if (res.email) {\n\n          this.api.presenttoast('Welcome!');\n          localStorage.setItem('userid', res.user_id);\n          localStorage.setItem('token', res.token);\n          localStorage.setItem('title', res.title);\n          localStorage.setItem('fname', res.first_name);\n          localStorage.setItem('lname', res.last_name);\n          localStorage.setItem('number', res.phone);\n          localStorage.setItem('email', res.email);\n          this.api.username = res.first_name;\n          // this.navCtrl.navigateRoot(['/dashboard']);\n          this.navCtrl.navigateRoot(['/home-page-screen-after-login']);\n        } else {\n          this.api.hideLoader();\n          this.api.presenttoast('Email or password is incorrect');\n          // this.error = true\n          // this.errormessage = 'Email or password is incorrect'\n          // setTimeout(() => {\n          //   this.error = false\n          // }, 3000);\n        }\n      },\n      (err) => {\n        this.api.hideLoader();\n        console.log('err==', err);\n\n        this.api.presenttoast(err);\n      }\n    );\n  }\n\n  openVhclMakeList() {\n    if (this.showMaker == true) {\n      this.showMaker = false;\n    } else {\n      this.showMaker = true;\n\n    }\n  }\n\n\n  selectVehicleMaker(list, index) {\n    this.agentloginType = list.manufacturer;\n    // this.vehicleModelVal = '';\n    this.showMaker = false;\n\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}