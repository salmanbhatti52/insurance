{"version":3,"file":"src_app_payment_payment_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAEV;AAE7C,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,sDAAW;KACvB;CACF,CAAC;IAMW,wBAAwB,SAAxB,wBAAwB;CAAG;AAA3B,wBAAwB;IAJpC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,wBAAwB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;AChBI;AACM;AACF;AACA;AACuB;AACvB;AACc;IAa9C,iBAAiB,SAAjB,iBAAiB;CAAG;AAApB,iBAAiB;IAV7B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,6EAAwB;YACxB,6EAA8B,CAAC,kDAAkD,CAAC;SACnF;QACD,YAAY,EAAE,CAAC,sDAAW,CAAC;KAC5B,CAAC;GACW,iBAAiB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnBa;AACO;AACT;AACM;AACyB;AACvC;IAOpB,WAAW,SAAX,WAAW;IAmBtB,YAAmB,QAAkB,EAC5B,MAAc,EACd,GAAwB,EACxB,OAAsB;QAHZ,aAAQ,GAAR,QAAQ,CAAU;QAC5B,WAAM,GAAN,MAAM,CAAQ;QACd,QAAG,GAAH,GAAG,CAAqB;QACxB,YAAO,GAAP,OAAO,CAAe;QAlB/B,UAAK,GAAG,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QAC3C,gBAAW,GAAG,EAAE,CAAC;QACjB,gBAAW,GAAG,KAAK,CAAC;QACpB,kBAAa,GAAG,EAAE,CAAC;QA0BnB,cAAS,GAAG,EAAE,CAAC;QAEf,QAAG,GAAQ,CAAC;QACZ,YAAO,GAAQ,CAAC;QAOhB,UAAK,GAAG,EAAE,CAAC;QACX,UAAK,GAAG,EAAE,CAAC;QACX,aAAQ,GAAG,EAAE,CAAC;QACd,WAAM,GAAG,EAAE,CAAC;QACZ,kBAAa,GAAG,EAAE,CAAC;QACnB,aAAQ,GAAG,EAAE,CAAC;QACd,aAAQ,GAAG,EAAE,CAAC;IA3BqB,CAAC;IA6BpC,WAAW;QACT,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;IACrC,CAAC;IAED,WAAW,CAAC,GAAQ;QAClB,IAAI,CAAC,KAAK,GAAG,qBAAqB,CAAC;QACnC,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,GAAG,CAAC,CAAC;QAC5C,IAAI,GAAG,CAAC,MAAM,IAAI,SAAS,EAAE;YAC3B,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;YACrB,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;YAC3C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;YAC7D,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAE3B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC7C,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,IAAI,IAAI,CAAC,SAAS,EAAE;oBAEjD,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;iBAE5B;aAEF;YACD,YAAY,CAAC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAChE,IAAI,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,aAAa,EAAE;gBAEvD,IAAI,MAAM,GAAG;oBACX,GAAG,EAAE,WAAW;oBAChB,KAAK,EAAE,sCAAsC;iBAC9C,CAAC;gBACF,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,SAAS,CAChC,CAAC,GAAQ,EAAE,EAAE;oBACX,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;oBACrB,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBACjB,IAAI,KAAK,GAAG,GAAG,CAAC,WAAW,CAAC;oBAC5B,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;gBACxB,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;oBACN,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBACjB,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;gBACxB,CAAC,CACF,CAAC;gBACF,iFAAiF;aAElF;iBAAM;gBACL,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;gBACrB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,iBAAiB,CAAC;aAC7C;SAGF;IAEH,CAAC;IACD,SAAS,CAAC,WAAW;QACnB,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;QACrB,IAAI,QAAQ,GAAG;YACb,yBAAyB;YACzB,WAAW,EAAE,MAAM;YACnB,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,SAAS,EAAE,IAAI,CAAC,OAAO;YACvB,YAAY,EAAE,KAAK;YACnB,QAAQ,EAAE,CAAC;YACX,SAAS,EAAE,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC;YAC5C,kBAAkB,EAAE,YAAY;YAChC,SAAS,EAAE;gBACT,UAAU,EAAE,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC;gBACzC,WAAW,EAAE,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC;gBAC1C,QAAQ,EAAE,IAAI,CAAC,SAAS;gBACxB,OAAO,EAAE,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC;gBACtC,SAAS,EAAE,YAAY,CAAC,OAAO,CAAC,eAAe,CAAC;gBAChD,YAAY,EAAE,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC;gBACjD,OAAO,EAAE,KAAK;gBACd,SAAS,EAAE,KAAK;gBAChB,SAAS,EAAE,KAAK;gBAChB,aAAa,EAAE,IAAI;gBACnB,aAAa,EAAE,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC;gBAC1C,SAAS,EAAE,eAAe;gBAC1B,WAAW,EAAE,KAAK;aACnB;YACD,UAAU,EAAE;gBACV;oBACE,WAAW,EAAE,KAAK;oBAClB,mBAAmB,EAAE,CAAC;oBACtB,gBAAgB,EAAE,IAAI,CAAC,OAAO;oBAC9B,QAAQ,EAAE;wBACR;4BACE,MAAM,EAAE,cAAc;4BACtB,OAAO,EAAE,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC;yBACvC;wBACD;4BACE,MAAM,EAAE,eAAe;4BACvB,OAAO,EAAE,MAAM;yBAChB;wBACD;4BACE,MAAM,EAAE,aAAa;4BACrB,OAAO,EAAE,YAAY,CAAC,OAAO,CAAC,cAAc,CAAC;yBAC9C;wBACD;4BACE,MAAM,EAAE,cAAc;4BACtB,OAAO,EAAE,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC;yBAEvC;wBACD;4BACE,MAAM,EAAE,kBAAkB;4BAC1B,OAAO,EAAE,KAAK;yBACf;wBACD;4BACE,MAAM,EAAE,cAAc;4BACtB,OAAO,EAAE,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC;yBAC1C;wBACD;4BACE,MAAM,EAAE,cAAc;4BACtB,OAAO,EAAE,SAAS;yBACnB;wBACD;4BACE,MAAM,EAAE,eAAe;4BACvB,OAAO,EAAE,GAAG;yBACb;wBACD;4BACE,MAAM,EAAE,cAAc;4BACtB,OAAO,EAAE,OAAO;yBACjB;wBACD;4BACE,MAAM,EAAE,aAAa;4BACrB,OAAO,EAAE,YAAY,CAAC,OAAO,CAAC,gBAAgB,CAAC;yBAEhD;wBACD;4BACE,MAAM,EAAE,cAAc;4BACtB,OAAO,EAAE,YAAY,CAAC,OAAO,CAAC,iBAAiB,CAAC;yBACjD;wBACD;4BACE,MAAM,EAAE,iBAAiB;4BACzB,OAAO,EAAE,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC;yBAC1C;wBACD;4BACE,MAAM,EAAE,eAAe;4BACvB,OAAO,EAAE,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC;yBACxC;wBACD;4BACE,MAAM,EAAE,WAAW;4BACnB,OAAO,EAAE,kBAAkB;yBAC5B;qBACF;iBACF;aACF;SACF;QACD,kDAAkD;QAClD,IAAI,CAAC,GAAG;aACL,QAAQ,CACP,uDAAuD,EACvD,QAAQ,EACR,WAAW,CACZ;aACA,SAAS,CACR,CAAC,GAAQ,EAAE,EAAE;YACX,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,GAAG,CAAC,CAAC;YACtC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;YACrB,YAAY,CAAC,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;YAE5D,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC;QAElC,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;YACN,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;YACrB,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;YAC9B,8CAA8C;YAC9C,kCAAkC;YAClC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC;QACpC,CAAC,CACF,CAAC;IACN,CAAC;IAED,cAAc,CAAC,KAAK;QAClB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;QACrE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;QAEzC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;QACtB,IAAI,MAAM,GAAG,kBAAkB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC/C,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QAE7B,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,mFAAmF,GAAG,MAAM,GAAG,SAAS,GAAG,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,SAAS,CAAC,CAAC,GAAQ,EAAE,EAAE;YAChK,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,GAAG,CAAC,CAAC;YACpC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;YACrB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,kBAAkB,CAAC,CAAC;QAChD,CAAC,EAAE,GAAG,CAAC,EAAE;YACP,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;YACtB,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,sBAAsB,CAAC,CAAC;QAChD,CAAC,CAAC;IACJ,CAAC;IACD,aAAa;QACX,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;IAChC,CAAC;IAID,QAAQ;QACN,IAAI,CAAC,WAAW,GAAG,mCAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC3D,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QACxC,IAAI,cAAc,GAAG,IAAI,IAAI,EAAE,CAAC;QAChC,IAAI,MAAM,GAAG,cAAc,CAAC,WAAW,CAAC,cAAc,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,CAAC;QAC1E,IAAI,CAAC,OAAO,GAAG,mCAAM,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC7D,IAAI,CAAC,WAAW,GAAG,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QACtD,IAAI,CAAC,SAAS,GAAG,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QACpD,IAAI,CAAC,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAC3C,IAAI,CAAC,SAAS,GAAG,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;QAC3D,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC;QACjE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC/C,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,UAAU,EAAE;gBACzC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK;gBAC5C,YAAY,CAAC,OAAO,CAAC,cAAc,EAAE,IAAI,CAAC,YAAY,CAAC;gBACvD,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI;gBACnC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY;gBAGhC,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,YAAY,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;aAEvE;SACF;IACH,CAAC;IACD,cAAc;QACZ,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,wBAAwB,CAAC,CAAC,CAAC;IACnD,CAAC;IACD,YAAY;QACV,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,+BAA+B,CAAC,CAAC,CAAC;IAC1D,CAAC;IACD,MAAM;QACJ,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IACvB,CAAC;IAED,YAAY,CAAC,GAAG;QACd,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,GAAG,CAAC,CAAC;QAClC,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;QACzB,IAAI,GAAG,IAAI,OAAO,EAAE;YAClB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;SACzB;aAAM;YACL,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;SAC1B;IACH,CAAC;IACD,YAAY,CAAC,EAAE;QACb,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,EAAE,CAAC,CAAC;QAChC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;IACxB,CAAC;IAED,OAAO;QACL,IAAI,IAAI,CAAC,aAAa,IAAI,EAAE,EAAE;YAC5B,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,2BAA2B,CAAC;SACnD;aAAM;YACL,IAAI,IAAI,CAAC,aAAa,IAAI,QAAQ,EAAE;gBAClC,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;gBACvB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC;aACpC;YACD,SAAS;YACT,yCAAyC;YACzC,8BAA8B;YAC9B,oCAAoC;YACpC,yDAAyD;YACzD,eAAe;YACf,4CAA4C;YAC5C,QAAQ;YACR,MAAM;YACN,IAAI;SACL;IACH,CAAC;IAED,UAAU,CAAC,aAAa;QACtB,IAAI,QAAQ,GAAG,yBAAyB,GAAG,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,gBAAgB,GAAG,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,sBAAsB,GAAG,aAAa,GAAG,sBAAsB,GAAG,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,0CAA0C,CAAC;QAEjR,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC,GAAQ,EAAE,EAAE;YACnD,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,GAAG,CAAC,CAAC;YACpC,IAAI,aAAa,IAAI,CAAC,EAAE;gBACtB,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,UAAU,EAAE;wBACxC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC;qBACxC,CAAC,CAAC;aACJ;QAEH,CAAC,CAAC;IACJ,CAAC;CACF;;YApVQ,qDAAQ;YAER,mDAAM;YAEN,gFAAmB;YADnB,yDAAa;;AAST,WAAW;IALvB,wDAAS,CAAC;QACT,QAAQ,EAAE,aAAa;QACvB,oEAAkC;;KAEnC,CAAC;GACW,WAAW,CAwUvB;AAxUuB","sources":["./src/app/payment/payment-routing.module.ts","./src/app/payment/payment.module.ts","./src/app/payment/payment.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PaymentPage } from './payment.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PaymentPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PaymentPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { PaymentPageRoutingModule } from './payment-routing.module';\nimport { PaymentPage } from './payment.page';\nimport { Angular4PaystackModule } from 'angular4-paystack';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PaymentPageRoutingModule,\n    Angular4PaystackModule.forRoot('pk_live_a8ca720ed1feb2f3304e6ab91eae45e42706406f')\n  ],\n  declarations: [PaymentPage]\n})\nexport class PaymentPageModule {}\n","import { Location } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { NavController } from '@ionic/angular';\nimport { InsuranceAppService } from '../services/insurance-app.service';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'app-payment',\n  templateUrl: './payment.page.html',\n  styleUrls: ['./payment.page.scss'],\n})\nexport class PaymentPage implements OnInit {\n\n  quoteItems: any;\n  quoteArrayLength: number;\n  value = localStorage.getItem('subProName');\n  chooosebank = '';\n  othermethod = false;\n  payemntmethod = '';\n  paymentoption: any;\n  priceofquote: any;\n  subprodName: any;\n  productID: any;\n  draftArr: any;\n  productres: any;\n  policyNo: any;\n  currentdate: any;\n  enddate: any;\n\n\n  constructor(public location: Location,\n    public router: Router,\n    public api: InsuranceAppService,\n    public navCtrl: NavController) { }\n  firstName: string;\n  lastName: string;\n  companyName: string;\n  quote: string;\n  valueOfVehice: number;\n  actualPremium: number;\n  floodExtension: number;\n  excessBuyBack: number;\n  trackingCharge: number;\n\n  reference = '';\n  title: any;\n  amt: any = 0\n  amtShow: any = 0\n  email: any;\n\n  vehicleVal: any;\n  vehicleMake: any;\n  vehicleClass: any;\n  vehicleModel: any;\n  regNo = '';\n  engNo = '';\n  chasisNo = '';\n  vehclr = '';\n  clientAddress = '';\n  dobValue = '';\n  yomValue = '';\n  genderVal\n  paymentInit() {\n    console.log('Payment initialized');\n  }\n\n  paymentDone(ref: any) {\n    this.title = 'Payment successfull';\n    console.log('payment succesfull-----', ref);\n    if (ref.status == 'success') {\n      this.api.showLoader()\n      localStorage.setItem('trxref', ref.trxref);\n      this.draftArr = JSON.parse(localStorage.getItem('draftArr'));\n      console.log(this.draftArr);\n\n      for (var i = 0; i < this.draftArr.length; i++) {\n        if (this.draftArr[i].product_id == this.productID) {\n\n          this.draftArr.splice(i, 1);\n\n        }\n\n      }\n      localStorage.setItem('draftArr', JSON.stringify(this.draftArr));\n      if (localStorage.getItem('subProName') == 'Third Party') {\n\n        var myData = {\n          sid: 'ECHANNEL2',\n          token: '78CD825E-2F6A-4986-962C-7F0FA3E945BD',\n        };\n        this.api.gibsapi(myData).subscribe(\n          (res: any) => {\n            this.api.hideLoader()\n            console.log(res);\n            let token = res.accessToken;\n            this.getresult(token);\n          },\n          (err) => {\n            console.log(err);\n            this.api.hideLoader();\n          }\n        );\n        // 'http://testcipapiservices.gibsonline.com/api/metadata/Policies/Motor' old url\n\n      } else {\n        this.api.hideLoader()\n        this.navCtrl.navigateRoot('paymentresponse')\n      }\n\n\n    }\n\n  }\n  getresult(Bearertoken) {\n    this.api.showLoader()\n    let postdata = {\n      // default productID:1001\n      \"productID\": '1001',\n      \"entryDate\": this.currentdate,\n      \"startDate\": this.currentdate,\n      \"endDate\": this.enddate,\n      \"fxCurrency\": \"NGN\",\n      \"fxRate\": 1,\n      \"agentID\": localStorage.getItem('agentcode'),\n      \"paymentAccountID\": \"1112000044\",\n      \"insured\": {\n        \"lastName\": localStorage.getItem('fname'),\n        \"firstName\": localStorage.getItem('lname'),\n        \"gender\": this.genderVal,\n        \"email\": localStorage.getItem('email'),\n        \"address\": localStorage.getItem('clientAddress'),\n        \"phoneLine1\": localStorage.getItem('phonenumber'),\n        \"isOrg\": false,\n        \"cityLGA\": \"n/a\",\n        \"stateID\": \"n/a\",\n        \"nationality\": \"bd\",\n        \"dateOfBirth\": localStorage.getItem('dob'),\n        \"kycType\": \"NOT_AVAILABLE\",\n        \"kycNumber\": \"n/a\"\n      },\n      \"sections\": [\n        {\n          \"sectionID\": \"n/a\",\n          \"sectionSumInsured\": 0,\n          \"sectionPremium\": this.amtShow,\n          \"fields\": [\n            {\n              \"name\": \"VehicleRegNo\",\n              \"value\": localStorage.getItem('regNo')\n            },\n            {\n              \"name\": \"VehicleTypeID\",\n              \"value\": \"JEEP\"\n            },\n            {\n              \"name\": \"VehicleUser\",\n              \"value\": localStorage.getItem('userfullname')\n            },\n            {\n              \"name\": \"EngineNumber\",\n              \"value\": localStorage.getItem('engNo')\n\n            },\n            {\n              \"name\": \"EngineCapacityHP\",\n              \"value\": \"2.5\"\n            },\n            {\n              \"name\": \"ChasisNumber\",\n              \"value\": localStorage.getItem('chasisNo')\n            },\n            {\n              \"name\": \"VehicleUsage\",\n              \"value\": \"PRIVATE\"\n            },\n            {\n              \"name\": \"NumberOfSeats\",\n              \"value\": \"1\"\n            },\n            {\n              \"name\": \"stateOfIssue\",\n              \"value\": \"Lagos\"\n            },\n            {\n              \"name\": \"VehicleMake\",\n              \"value\": localStorage.getItem('vechilemakeval')\n\n            },\n            {\n              \"name\": \"VehicleModel\",\n              \"value\": localStorage.getItem('vechilemodelval')\n            },\n            {\n              \"name\": \"ManufactureYear\",\n              \"value\": localStorage.getItem('yomValue')\n            },\n            {\n              \"name\": \"VehicleColour\",\n              \"value\": localStorage.getItem('vehclr')\n            },\n            {\n              \"name\": \"CoverType\",\n              \"value\": 'THIRD_PARTY_ONLY'\n            }\n          ]\n        }\n      ]\n    }\n    // 'https://cors-anywhere.herokuapp.com/corsdemo/'\n    this.api\n      .postdata(\n        'http://testcipapiservices.gibsonline.com/api/policies',\n        postdata,\n        Bearertoken\n      )\n      .subscribe(\n        (res: any) => {\n          console.log('motor response---', res);\n          this.api.hideLoader()\n          localStorage.setItem('gibsProductres', JSON.stringify(res));\n\n          this.getcertificate(Bearertoken)\n\n        },\n        (err) => {\n          this.api.hideLoader()\n          console.log('errrrrrrr', err);\n          // let errormsg = err.error.errors[0].message;\n          // this.api.presenttoast(errormsg)\n          this.api.presenttoast(err.message)\n        }\n      );\n  }\n\n  getcertificate(token) {\n    this.productres = JSON.parse(localStorage.getItem('gibsProductres'));\n    this.policyNo = this.productres.policyNo;\n\n    this.api.showLoader();\n    let encode = encodeURIComponent(this.policyNo);\n    console.log('eee--', encode);\n\n    this.api.get('http://testcipapiservices.gibsonline.com/api/utilities/send/certificate?policyNo=' + encode + '&email=' + this.email, token).subscribe((res: any) => {\n      console.log('certificate====', res);\n      this.api.hideLoader()\n      this.navCtrl.navigateRoot('payment2response');\n    }, err => {\n      this.api.hideLoader();\n      this.api.presenttoast('Something went wrong');\n    })\n  }\n  paymentCancel() {\n    console.log('payment failed');\n  }\n\n\n\n  ngOnInit() {\n    this.currentdate = moment(new Date()).format('YYYY-MM-DD');\n    console.log('cdate=', this.currentdate);\n    var oneYearFromNow = new Date();\n    var result = oneYearFromNow.setFullYear(oneYearFromNow.getFullYear() + 1);\n    this.enddate = moment(new Date(result)).format('YYYY-MM-DD');\n    this.subprodName = localStorage.getItem('subProName');\n    this.productID = localStorage.getItem('product_id');\n    this.email = localStorage.getItem('email');\n    this.reference = `ref-${Math.ceil(Math.random() * 10e13)}`;\n    this.quoteItems = JSON.parse(localStorage.getItem('quoteItems'));\n    for (var i = 0; i < this.quoteItems.length; i++) {\n      if (this.quoteItems[i].type == \"currency\") {\n        this.priceofquote = this.quoteItems[i].value\n        localStorage.setItem('priceofquote', this.priceofquote)\n        this.amt = this.priceofquote + '00'\n        this.amtShow = this.priceofquote\n\n\n        console.log('pesyyyyyy-------', localStorage.getItem('priceofquote'));\n\n      }\n    }\n  }\n  buyOnlineQuote() {\n    this.router.navigate(['/car-insurance-details']);\n  }\n  getAnewQuote() {\n    this.router.navigate(['/home-page-screen-after-login']);\n  }\n  goback() {\n    this.location.back();\n  }\n\n  selectmethod(val) {\n    console.log('value grt====', val);\n    this.payemntmethod = val;\n    if (val == 'other') {\n      this.othermethod = true;\n    } else {\n      this.othermethod = false;\n    }\n  }\n  onItemChange(ev) {\n    console.log(\" Value is : \", ev);\n    this.chooosebank = ev;\n  }\n\n  proceed() {\n    if (this.payemntmethod == '') {\n      this.api.presenttoast('Choose one payment method')\n    } else {\n      if (this.payemntmethod == 'WebPAY') {\n        this.paymentoption = 1;\n        this.paymentapi(this.paymentoption)\n      }\n      // else {\n      //   if (this.payemntmethod == 'other') {\n      //     this.paymentoption = 2;\n      //     if (this.chooosebank == '') {\n      //       this.api.presenttoast('Choose atleast one bank')\n      //     } else {\n      //       this.paymentapi(this.paymentoption)\n      //     }\n      //   }\n      // }\n    }\n  }\n\n  paymentapi(paymentoption) {\n    let datasend = \"myData={\\\"product_id\\\":\" + localStorage.getItem('subProId') + \",\\\"quote_id\\\":\" + localStorage.getItem('quote_id') + \",\\\"payment_option\\\":\" + paymentoption + \",\\\"verify_token\\\":\\\"\" + localStorage.getItem('token') + \"\\\",\\\"method\\\":\\\"payment_method_select\\\"}\";\n\n    this.api.insertData(datasend).subscribe((res: any) => {\n      console.log('payemt response', res);\n      if (paymentoption == 1) {\n        this.navCtrl.navigateForward(['payquote', {\n          payres: JSON.stringify(res.transaction)\n        }])\n      }\n\n    })\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}